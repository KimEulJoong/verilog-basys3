# 시스템반도체설계 Final Project 

## 🧑‍💻 팀 정보
- **팀명**: 4조
- **팀원**: 김을중, 최윤석, 문우진
- **기관**: 대한상공회의소 서울기술교육센터 / AI 시스템 반도체 설계 2기

---

## 1. 프로젝트 개요

- **목적**: Verilog HDL 및 디지털 회로 설계 실습을 통해 FPGA 및 센서 기반 시스템 구현 및 통신 이해
- **목표**:
  - 초음파 거리 측정 (HC-SR04)
  - 온/습도 측정 (DHT11)
  - UART 통신 기반 시스템 제어
- **사용 장비/환경**:
  - FPGA: Digilent Basys 3 (Artix-7)
  - SW: Vivado 2020.2, VS Code
  - 센서: HC-SR04, DHT11

---

## 2. 설계 내용 요약

### 🔹 HC-SR04 (초음파 센서)

- **특징**:
  - 10us 트리거 → 8사이클(40kHz) 초음파 전송
  - Echo 시간으로 거리 계산: `distance = time(us)/58`
- **구성**:
  - `tick_gen`, `start_trigger`, `distance` 모듈로 구성
  - FSM 상태: `IDLE → MEASURE → DONE`
- **트러블슈팅**:
  - 비정상 측정값 (예: 814cm) → Echo falling edge 동기화 문제
  - **해결**: Echo edge 기반 FSM 설계 및 신호 동기화 처리
- **고찰**:
  - 비동기 신호의 동기화 중요성
  - FSM 구조를 통한 안정적인 상태 전이 구현

### 🔹 DHT11 (온/습도 센서)

- **특징**:
  - Half Duplex 방식, 3.3~5V 전원
  - 습도 및 온도 값을 40bit 데이터로 전달
- **통신 방식**:
  - START(18ms) → WAIT(30us) → SYNC → DATA(40bit) → STOP
  - 각 상태 FSM 및 ASM으로 설계
- **트러블슈팅**:
  - 1bit 데이터 밀림 문제 → SYNC 시점에 노이즈 영향 추정
  - **해결**: SYNC 구간에 Buffer Time 도입
- **고찰**:
  - 시뮬레이션과 실제 하드웨어 차이 인지
  - 신호의 정확한 타이밍 처리 중요성

### 🔹 UART + FIFO + 센서 시스템

- **구성**:
  - UART 송수신, FIFO 버퍼, 센서 데이터 통합
  - `watch_uart`, `uart_controller`, `fifo_uart` 등 모듈 사용
- **동작 방식**:
  - `rx_done` → `rx_data` → FSM 처리 → 명령 실행
  - FIFO 상태에 따라 Push/Pop 제어
- **트러블슈팅**:
  - 첫 명령만 인식되는 문제 → RX_FIFO write/pointer 업데이트 문제
  - **해결**: POP 조건 재정의 (`~rx_empty`)
- **고찰**:
  - 블록 다이어그램을 통한 전체 흐름 파악
  - UART-FIFO 구조에 대한 이해와 모듈 통합 경험 축적

---

## 3. 결론 및 고찰

- **성과**:
  - 초음파 거리 측정, 온습도 측정, UART 기반 제어 시스템 정상 구현
  - 실전 설계를 통한 자신감 향상
- **학습점**:
  - FSM 기반 제어 로직의 명확한 전이 설계
  - 센서 및 UART와 같은 실시간 입력에 대한 타이밍 처리 중요성
  - 모듈간 신호 연동 및 트러블슈팅 경험을 통한 역량 강화
